<!DOCTYPE html>
<html lang="en">
<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="node_modules/@shower/ribbon/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }

        .textwbg h2 {
            margin: 30px 0 0;
            color: white;
            text-align: center;
            font-size: 70px;
        }

        .textwbg p {
            margin: 10px 0 0;
            text-align: center;
            color: white;
            font-style: italic;
            font-size: 20px;
        }

        .textwbg p a {
            color: white;
        }

        code {
            font-size: 18px;
        }
    </style>
</head>
<body class="shower list">

<header class="caption">
    <h1>Devnexus - jOOQ</h1>
    <p>Jason Lee, Red Hat</p>
</header>

<section class="slide textwbg" id="cover">
    <h2 style="margin: 100px">jOOQ: Data abstractions without distraction</h2>
    <p>Jason Lee</p>
    <p>Principal Software Engineer, Red Hat</p>
    <p>April 2022</p>
    <img class="place top left" src="pictures/rh200.png" style="margin: 50px">
    <figure>
        <img class="cover" src="pictures/cover.png" alt="Red Hat slide background">
        <figcaption class="copyright right white">
            <a href="https://redhat.com">© Red Hat</a>
        </figcaption>
    </figure>
</section>

<section class="slide">
    <h2>Who Am I?</h2>
    <ul>
        <li>Software developer since 1997</li>
        <li>Principal Java Engineer at Red Hat
            <ul>
                <li>WildFly/EAP</li>
                <li>Undertow</li>
            </ul>
        </li>
        <li>Former president <a href="https://okcjug.org">Oklahoma City Java Users Group</a></li>
        <li><a href="https://www.packtpub.com/application-development/java-9-programming-blueprints">Book Author - Java 9 Programming Blueprints</a>
        </li>
        <li><a href="https://jasondl.ee">Blogger - https://jasondl.ee</a></li>
    </ul>
</section>

<section class="slide">
    <h2>What is jOOQ?</h2>
    <ul>
        <li>“[O]riginally...created as a library for complete abstraction of JDBC and all database interaction”</li>
        <li>Type-safe SQL building</li>
        <li>SQL dialect abstraction</li>
        <li>Improved query execution and data retrieval API</li>
        <li>Active Records</li>
        <li>So much more...</li>
    </ul>
</section>

<section class="slide">
    <h2>What is jOOQ? (cont.)</h2>
    <ul>
        <li>Sibling libraries
            <ul>
                <li><a href="https://www.jooq.org/products/jOOX">jOOX</a> - The Power of jQuery Applied to W3C DOM</li>
                <li><a href="https://www.jooq.org/products/jOO%CE%BB">jOOλ</a> - The Missing Parts in Java 8</li>
                <li><a href="https://www.jooq.org/products/jOOR">jOOR</a> - Fluent Reflection in Java</li>
                <li><a href="https://www.jooq.org/products/jOOU">jOOU</a> - Unsigned Integers</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <h2>jOOQ Alternatives</h2>
    <p>Lots of options in the Java ecosystem:</p>
    <ul class="columns two">
        <li>JDBC</li>
        <li>Hibernate/JPA</li>
        <li>Spring JdbcTemplate/Data</li>
        <li>MyBatis</li>
        <li>Jdbi</li>
        <li>...</li>
    </ul>
    <p class="next">If any of these work for you, carry on!</p>
</section>

<section class="slide">
    <h2>Supported Databases</h2>
    <span class="next">What databases are supported?</span>
    <span class="next shout">All of them!</span>
</section>

<section class="slide">
    <h2>Supported Databases (cont)</h2>
    <ul class="next">
        <li>Open Source and Commercial licenses</li>
        <li class="next">Free
            <ul class="columns four">
                <li>PostgreSQL</li>
                <li>MySQL</li>
                <li>MariaDB</li>
                <li>Firebird</li>
                <li>Derby</li>
                <li>H2</li>
                <li>SQLite</li>
            </ul>
        </li>
        <li class="next">Commercial (three tiers: Express, Professional, and Enterprise)
            <ul class="columns four">
                <li>MS Access</li>
                <li>Oracle</li>
                <li>SQL Server</li>
                <li>Redshift</li>
                <li>Aurora</li>
                <li>CockroachDB</li>
                <li>Informix</li>
                <li>Teradata</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide textwbg" id="showme">
    <h2 class="shout shrink">Show me the code!!</h2>
    <figure>
        <img class="cover width" src="pictures/showmethemoney.jpg" alt="Show me the money!">
    </figure>
</section>

<section class="slide">
    <h2>Setting up the build - Maven</h2>
    <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.jooq&lt;/groupId&gt;
    &lt;artifactId&gt;jooq&lt;/artifactId&gt;
    &lt;version&gt;3.16.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jooq&lt;/groupId&gt;
    &lt;artifactId&gt;jooq-meta&lt;/artifactId&gt;
    &lt;version&gt;3.16.5&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</section>

<section class="slide">
    <h2>Setting up the build - Gradle</h2>
    <div class="next">You're on your own</div>
    <div class="next">Just kidding!
        <pre class="next"><code>dependencies {
    compile 'org.jooq:jooq:3.16.5'
    compile 'org.jooq:jooq-meta:3.16.5'
}</code></pre>
    </div>
</section>

<section class="slide">
    <h2>First step - DSLContext</h2>
    <ul>
        <li class="next">Primary API is the <code>DSLContext</code></li>
        <li class="next">Can use either <code>Connection</code> or a <code>DataSource</code>
            <ul class="next">
                <li>DSLContext context = DSL.using(conn, SQLDialect.MYSQL);</li>
                <li class="next">DSLContext context = DSL.using(dataSource, SQLDialect.MYSQL);</li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <h2>First step - DSLContext (cont)</h2>
    <ul>
        <li>For finer-grained control, use a <code>Configuration</code> object:
            <br>
            <pre><code>Configuration configuration = new DefaultConfiguration()
    .set(conn)
    .set(SQLDialect.POSTGRES)
    .set(new Settings()
        .withRenderQuotedNames(RenderQuotedNames.NEVER)
        .withRenderNameCase(RenderNameCase.LOWER_IF_UNQUOTED)
    );
DSLContext context = DSL.using(configuration);
                </code>
            </pre>
        </li>
    </ul>
</section>

<section class="slide">
    <h2>Writing queries - non-codegen</h2>
    <p><pre><code>dsl.select(
        DSL.field("actor_id"),
        DSL.field("last_name"),
        DSL.field("first_name")
)
.from(DSL.table("actor"))
        </code></pre></p>
</section>

<section class="slide">
    <h2>Fetching data - non-codegen</h2>
    <p>Query:
        <pre><code>dsl.select(...)
        .from(DSL.table("actor"))
        <mark class="important">.fetch())
    .map(r -> Author.fromRecord(r))
    .collect(Collectors.toList())</mark></code></pre></p>
</section>

<section class="slide">
    <h2>Fetching data - non-codegen (cont)</h2>
    <p>Fetching:<pre><code>public class Actor {
    public static Actor fromRecord(Record r) {
        return new Actor()
                .setId(r.getValue("actor_id", Long.class))
                .setFirstName(r.getValue("first_name", String.class))
                .setLastName(r.getValue("last_name", String.class));
    }
}</code></pre>
    </p>
</section>

<section class="slide">
    <h2>Code Generation - jOOQ Done right</h2>
    <div>You can use jOOQ just for SQL authoring. But you shouldn't. :)</div>
    <div class="next">jOOQ code generation produces lots of artifacts</div>
    <ul class="next columns three">
        <li>Tables</li>
        <li>Records</li>
        <li>Sequences</li>
        <li>POJOs</li>
        <li>DAOs</li>
        <li>Stored procedures</li>
        <li>User-defined types</li>
        <li>and many more</li>
    </ul>
</section>

<section class="slide">
    <h2>Generating code</h2>
    <div>Options:
        <ul class="next">
            <li class="next">XML (commandline and Maven)</li>
            <li class="next">Programmatic</li>
            <li class="next">Gradle</li>
        </ul>
    </div>
</section>

<section class="slide">
    <h2>Generating Code - XML</h2>
    <p class="next">I prefer Maven. Simpler command.</p>
    <pre class="next"><code style="font-size: 14px; line-height: 1.5;">&lt;plugin&gt;
  &lt;groupId&gt;org.jooq&lt;/groupId&gt;
  &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;
  &lt;version&gt;${version.jooq}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;generate&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</section>

<footer class="badge">
    <a href="https://github.com/shower/shower">Fork me on GitHub</a>
</footer>

<div class="progress"></div>

<script src="node_modules/@shower/core/dist/shower.js"></script>
<!-- Copyright © 2022 Yours Truly, Famous Inc. -->

</body>
</html>
